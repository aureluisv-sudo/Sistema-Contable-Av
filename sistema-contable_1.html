<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema Contable Personal</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .balance-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            padding: 30px;
            background: #f8f9fa;
        }

        .balance-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            text-align: center;
        }

        .balance-card h3 {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .balance-card .amount {
            font-size: 24px;
            font-weight: bold;
            color: #333;
        }

        .balance-card.income .amount {
            color: #10b981;
        }

        .balance-card.expense .amount {
            color: #ef4444;
        }

        .balance-card.balance .amount {
            color: #667eea;
        }

        .tabs {
            display: flex;
            background: white;
            border-bottom: 2px solid #e5e7eb;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            min-width: 120px;
            padding: 15px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            color: #666;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }

        .tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
            font-weight: bold;
        }

        .tab-content {
            display: none;
            padding: 30px;
        }

        .tab-content.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-danger {
            background: #ef4444;
            color: white;
            padding: 8px 16px;
            font-size: 14px;
        }

        .btn-danger:hover {
            background: #dc2626;
        }

        .transaction-list {
            margin-top: 30px;
        }

        .transaction-item {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
        }

        .transaction-item:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }

        .transaction-info {
            flex: 1;
        }

        .transaction-type {
            font-size: 12px;
            color: #666;
            text-transform: uppercase;
            margin-bottom: 5px;
        }

        .transaction-description {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }

        .transaction-date {
            font-size: 14px;
            color: #999;
        }

        .transaction-amount {
            font-size: 20px;
            font-weight: bold;
            margin-right: 15px;
        }

        .transaction-amount.income {
            color: #10b981;
        }

        .transaction-amount.expense {
            color: #ef4444;
        }

        .loan-card {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .loan-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .loan-name {
            font-size: 18px;
            font-weight: bold;
            color: #333;
        }

        .loan-amount {
            font-size: 20px;
            font-weight: bold;
            color: #ef4444;
        }

        .loan-detail {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-top: 1px solid #f3f4f6;
        }

        .credit-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .credit-card-name {
            font-size: 14px;
            margin-bottom: 20px;
            opacity: 0.9;
        }

        .credit-limit {
            font-size: 16px;
            margin-bottom: 10px;
        }

        .credit-available {
            font-size: 28px;
            font-weight: bold;
        }

        .progress-bar {
            background: rgba(255,255,255,0.3);
            height: 8px;
            border-radius: 4px;
            margin-top: 15px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: white;
            border-radius: 4px;
            transition: width 0.3s;
        }

        .filter-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .filter-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        @media (max-width: 768px) {
            .balance-summary {
                grid-template-columns: 1fr;
            }

            .tabs {
                flex-wrap: nowrap;
            }

            .transaction-item {
                flex-direction: column;
                align-items: flex-start;
            }

            .transaction-amount {
                margin-top: 10px;
                margin-right: 0;
            }
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .empty-state svg {
            width: 80px;
            height: 80px;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .budget-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .budget-card {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }

        .budget-card h3 {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .budget-amount {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }

        .budget-amount.spent {
            color: #ef4444;
        }

        .budget-amount.available {
            color: #10b981;
        }

        .budget-percentage {
            font-size: 28px;
            font-weight: bold;
            color: #667eea;
        }

        .progress-bar-container {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .progress-bar-large {
            background: #e5e7eb;
            height: 30px;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .progress-fill-large {
            height: 100%;
            background: linear-gradient(90deg, #10b981 0%, #667eea 50%, #ef4444 100%);
            border-radius: 15px;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .progress-info {
            text-align: center;
            font-size: 16px;
            color: #666;
            font-weight: 500;
        }

        .category-budget-item {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .category-budget-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .category-budget-name {
            font-weight: bold;
            color: #333;
        }

        .category-budget-amount {
            font-weight: bold;
            color: #667eea;
        }

        .category-budget-bar {
            background: #e5e7eb;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 8px;
        }

        .category-budget-fill {
            height: 100%;
            background: #10b981;
            border-radius: 4px;
            transition: width 0.3s;
        }

        .category-budget-fill.warning {
            background: #f59e0b;
        }

        .category-budget-fill.danger {
            background: #ef4444;
        }

        .category-budget-info {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            color: #666;
        }

        .stats-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            justify-content: center;
        }

        .stats-btn {
            padding: 12px 30px;
            border: 2px solid #e5e7eb;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            color: #666;
            transition: all 0.3s;
        }

        .stats-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
        }

        .stats-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 15px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .stat-card.income {
            border-color: #10b981;
            background: linear-gradient(135deg, #ffffff 0%, #f0fdf4 100%);
        }

        .stat-card.expense {
            border-color: #ef4444;
            background: linear-gradient(135deg, #ffffff 0%, #fef2f2 100%);
        }

        .stat-card.balance {
            border-color: #667eea;
            background: linear-gradient(135deg, #ffffff 0%, #eef2ff 100%);
        }

        .stat-icon {
            font-size: 40px;
        }

        .stat-info {
            flex: 1;
        }

        .stat-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #333;
        }

        .category-stats {
            display: grid;
            gap: 15px;
        }

        .category-stat-item {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .category-stat-name {
            font-weight: 500;
            color: #333;
        }

        .category-stat-amount {
            font-weight: bold;
            font-size: 18px;
        }

        .category-stat-amount.income {
            color: #10b981;
        }

        .category-stat-amount.expense {
            color: #ef4444;
        }

        .category-stat-bar {
            height: 6px;
            background: #e5e7eb;
            border-radius: 3px;
            margin-top: 8px;
            overflow: hidden;
        }

        .category-stat-fill {
            height: 100%;
            background: #667eea;
            border-radius: 3px;
        }

        .category-stat-percentage {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }

        .monthly-breakdown {
            display: grid;
            gap: 15px;
        }

        .month-item {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            padding: 20px;
        }

        .month-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .month-name {
            font-weight: bold;
            font-size: 18px;
            color: #333;
        }

        .month-balance {
            font-weight: bold;
            font-size: 18px;
        }

        .month-balance.positive {
            color: #10b981;
        }

        .month-balance.negative {
            color: #ef4444;
        }

        .month-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            font-size: 14px;
            color: #666;
        }

        @media (max-width: 768px) {
            .stats-summary {
                grid-template-columns: 1fr;
            }

            .month-details {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üí∞ Sistema Contable Personal</h1>
            <p>Controla tus finanzas de manera f√°cil y eficiente</p>
        </div>

        <div class="balance-summary">
            <div class="balance-card income">
                <h3>Total Ingresos</h3>
                <div class="amount" id="totalIncome">RD$ 0.00</div>
            </div>
            <div class="balance-card expense">
                <h3>Total Gastos</h3>
                <div class="amount" id="totalExpense">RD$ 0.00</div>
            </div>
            <div class="balance-card balance">
                <h3>Balance</h3>
                <div class="amount" id="totalBalance">RD$ 0.00</div>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('movements')">Movimientos</button>
            <button class="tab" onclick="switchTab('budget')">Presupuesto</button>
            <button class="tab" onclick="switchTab('statistics')">Estad√≠sticas</button>
            <button class="tab" onclick="switchTab('loans')">Pr√©stamos</button>
            <button class="tab" onclick="switchTab('credit')">Tarjeta</button>
            <button class="tab" onclick="switchTab('history')">Historial</button>
        </div>

        <div id="movements" class="tab-content active">
            <h2 style="margin-bottom: 20px;">Registrar Movimiento</h2>
            
            <form id="movementForm">
                <div class="form-group">
                    <label>Tipo de Movimiento</label>
                    <select id="movementType" required>
                        <option value="">Seleccionar...</option>
                        <option value="income">Ingreso</option>
                        <option value="expense">Gasto</option>
                    </select>
                </div>

                <div class="form-group" id="categoryGroup" style="display:none;">
                    <label>Categor√≠a</label>
                    <select id="category" required>
                        <option value="">Seleccionar...</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Monto (RD$)</label>
                    <input type="number" id="amount" step="0.01" required placeholder="0.00">
                </div>

                <div class="form-group">
                    <label>Descripci√≥n</label>
                    <input type="text" id="description" required placeholder="Ej: Pago mensual, venta del d√≠a...">
                </div>

                <div class="form-group">
                    <label>Fecha</label>
                    <input type="date" id="date" required>
                </div>

                <div class="form-group">
                    <label>Notas (Opcional)</label>
                    <textarea id="notes" rows="3" placeholder="Informaci√≥n adicional..."></textarea>
                </div>

                <button type="submit" class="btn btn-primary" style="width: 100%;">Registrar Movimiento</button>
            </form>
        </div>

        <div id="budget" class="tab-content">
            <h2 style="margin-bottom: 20px;">Presupuesto Mensual</h2>
            
            <div class="budget-overview">
                <div class="budget-card">
                    <h3>Presupuesto del Mes</h3>
                    <div class="budget-amount" id="monthlyBudget">RD$ 0.00</div>
                </div>
                <div class="budget-card">
                    <h3>Gastado</h3>
                    <div class="budget-amount spent" id="budgetSpent">RD$ 0.00</div>
                </div>
                <div class="budget-card">
                    <h3>Disponible</h3>
                    <div class="budget-amount available" id="budgetAvailable">RD$ 0.00</div>
                </div>
                <div class="budget-card">
                    <h3>Cumplimiento</h3>
                    <div class="budget-percentage" id="budgetCompliance">0%</div>
                </div>
            </div>

            <div class="progress-bar-container">
                <div class="progress-bar-large">
                    <div class="progress-fill-large" id="budgetProgressBar"></div>
                </div>
                <div class="progress-info">
                    <span id="budgetProgressText">0% del presupuesto usado</span>
                </div>
            </div>

            <h3 style="margin: 30px 0 15px 0;">Configurar Presupuesto Mensual</h3>
            <form id="budgetForm">
                <div class="form-group">
                    <label>Presupuesto Mensual (RD$)</label>
                    <input type="number" id="budgetAmount" step="0.01" required placeholder="Ej: 50000.00">
                </div>

                <div class="form-group">
                    <label>Mes y A√±o</label>
                    <input type="month" id="budgetMonth" required>
                </div>

                <button type="submit" class="btn btn-primary" style="width: 100%;">Establecer Presupuesto</button>
            </form>

            <h3 style="margin: 30px 0 15px 0;">Presupuestos por Categor√≠a</h3>
            <div id="categoryBudgets">
                <div class="empty-state" style="padding: 40px 20px;">
                    <p>Configura presupuestos por categor√≠a de gasto</p>
                </div>
            </div>

            <form id="categoryBudgetForm" style="margin-top: 20px;">
                <div class="form-group">
                    <label>Categor√≠a</label>
                    <select id="budgetCategory" required>
                        <option value="">Seleccionar...</option>
                        <option value="Alimentaci√≥n">Alimentaci√≥n</option>
                        <option value="Transporte">Transporte</option>
                        <option value="Servicios">Servicios</option>
                        <option value="Entretenimiento">Entretenimiento</option>
                        <option value="Salud">Salud</option>
                        <option value="Otros Gastos">Otros Gastos</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>L√≠mite Mensual (RD$)</label>
                    <input type="number" id="categoryBudgetAmount" step="0.01" required placeholder="0.00">
                </div>

                <button type="submit" class="btn btn-primary" style="width: 100%;">Agregar L√≠mite por Categor√≠a</button>
            </form>
        </div>

        <div id="statistics" class="tab-content">
            <h2 style="margin-bottom: 20px;">Estad√≠sticas y An√°lisis</h2>
            
            <div class="stats-selector">
                <button class="stats-btn active" onclick="showStats('monthly')">Mensual</button>
                <button class="stats-btn" onclick="showStats('annual')">Anual</button>
            </div>

            <div id="monthlyStats" class="stats-view">
                <div class="form-group" style="max-width: 300px; margin: 20px auto;">
                    <label>Seleccionar Mes</label>
                    <input type="month" id="statsMonth" onchange="updateMonthlyStats()">
                </div>

                <div class="stats-summary">
                    <div class="stat-card income">
                        <div class="stat-icon">üìà</div>
                        <div class="stat-info">
                            <div class="stat-label">Ingresos del Mes</div>
                            <div class="stat-value" id="monthIncomeTotal">RD$ 0.00</div>
                        </div>
                    </div>
                    <div class="stat-card expense">
                        <div class="stat-icon">üìâ</div>
                        <div class="stat-info">
                            <div class="stat-label">Gastos del Mes</div>
                            <div class="stat-value" id="monthExpenseTotal">RD$ 0.00</div>
                        </div>
                    </div>
                    <div class="stat-card balance">
                        <div class="stat-icon">üí∞</div>
                        <div class="stat-info">
                            <div class="stat-label">Balance del Mes</div>
                            <div class="stat-value" id="monthBalanceTotal">RD$ 0.00</div>
                        </div>
                    </div>
                </div>

                <h3 style="margin: 30px 0 15px 0;">Ingresos por Categor√≠a</h3>
                <div id="monthIncomeByCategory" class="category-stats"></div>

                <h3 style="margin: 30px 0 15px 0;">Gastos por Categor√≠a</h3>
                <div id="monthExpenseByCategory" class="category-stats"></div>
            </div>

            <div id="annualStats" class="stats-view" style="display: none;">
                <div class="form-group" style="max-width: 300px; margin: 20px auto;">
                    <label>Seleccionar A√±o</label>
                    <select id="statsYear" onchange="updateAnnualStats()">
                        <option value="">Seleccionar...</option>
                    </select>
                </div>

                <div class="stats-summary">
                    <div class="stat-card income">
                        <div class="stat-icon">üìà</div>
                        <div class="stat-info">
                            <div class="stat-label">Ingresos del A√±o</div>
                            <div class="stat-value" id="yearIncomeTotal">RD$ 0.00</div>
                        </div>
                    </div>
                    <div class="stat-card expense">
                        <div class="stat-icon">üìâ</div>
                        <div class="stat-info">
                            <div class="stat-label">Gastos del A√±o</div>
                            <div class="stat-value" id="yearExpenseTotal">RD$ 0.00</div>
                        </div>
                    </div>
                    <div class="stat-card balance">
                        <div class="stat-icon">üí∞</div>
                        <div class="stat-info">
                            <div class="stat-label">Balance del A√±o</div>
                            <div class="stat-value" id="yearBalanceTotal">RD$ 0.00</div>
                        </div>
                    </div>
                </div>

                <h3 style="margin: 30px 0 15px 0;">Resumen Mensual del A√±o</h3>
                <div id="yearMonthlyBreakdown" class="monthly-breakdown"></div>

                <h3 style="margin: 30px 0 15px 0;">Promedio Mensual</h3>
                <div class="stats-summary">
                    <div class="stat-card">
                        <div class="stat-info">
                            <div class="stat-label">Ingreso Promedio</div>
                            <div class="stat-value" id="avgMonthlyIncome">RD$ 0.00</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-info">
                            <div class="stat-label">Gasto Promedio</div>
                            <div class="stat-value" id="avgMonthlyExpense">RD$ 0.00</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="loans" class="tab-content">
            <h2 style="margin-bottom: 20px;">Mis Pr√©stamos</h2>
            
            <div class="loan-card">
                <div class="loan-header">
                    <div class="loan-name">üè¶ BHD Le√≥n</div>
                    <div class="loan-amount">RD$ 2,810.00</div>
                </div>
                <div class="loan-detail">
                    <span>Fecha de Pago:</span>
                    <strong>D√≠a 10 de cada mes</strong>
                </div>
                <div class="loan-detail">
                    <span>Pr√≥ximo Pago:</span>
                    <strong id="bhdNextPayment">-</strong>
                </div>
            </div>

            <div class="loan-card">
                <div class="loan-header">
                    <div class="loan-name">üè¶ Scotiabank</div>
                    <div class="loan-amount">RD$ 1,842.00</div>
                </div>
                <div class="loan-detail">
                    <span>Fecha de Pago:</span>
                    <strong>D√≠a 24 de cada mes</strong>
                </div>
                <div class="loan-detail">
                    <span>Pr√≥ximo Pago:</span>
                    <strong id="scotiaNextPayment">-</strong>
                </div>
            </div>

            <div class="loan-card" style="background: #fef3c7; border-color: #fbbf24;">
                <div class="loan-header">
                    <div class="loan-name">üí≥ Total Compromisos Mensuales</div>
                    <div class="loan-amount" style="color: #b45309;">RD$ 4,652.00</div>
                </div>
            </div>
        </div>

        <div id="credit" class="tab-content">
            <h2 style="margin-bottom: 20px;">Tarjeta de Cr√©dito</h2>
            
            <div class="credit-card">
                <div class="credit-card-name">BANCO QIK</div>
                <div class="credit-limit">L√≠mite de Cr√©dito</div>
                <div class="credit-available" id="creditAvailable">RD$ 10,000.00</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="creditProgress" style="width: 0%"></div>
                </div>
                <div style="margin-top: 10px; font-size: 14px; opacity: 0.9;">
                    <span id="creditUsed">RD$ 0.00</span> usado de RD$ 10,000.00
                </div>
            </div>

            <h3 style="margin: 30px 0 15px 0;">Registrar Uso de Tarjeta</h3>
            <form id="creditForm">
                <div class="form-group">
                    <label>Tipo de Operaci√≥n</label>
                    <select id="creditOperation" required>
                        <option value="">Seleccionar...</option>
                        <option value="charge">Cargo (Compra)</option>
                        <option value="payment">Pago (Abono)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Monto (RD$)</label>
                    <input type="number" id="creditAmount" step="0.01" required placeholder="0.00">
                </div>

                <div class="form-group">
                    <label>Descripci√≥n</label>
                    <input type="text" id="creditDescription" required placeholder="Ej: Compra supermercado, pago tarjeta...">
                </div>

                <div class="form-group">
                    <label>Fecha</label>
                    <input type="date" id="creditDate" required>
                </div>

                <button type="submit" class="btn btn-primary" style="width: 100%;">Registrar Operaci√≥n</button>
            </form>
        </div>

        <div id="history" class="tab-content">
            <h2 style="margin-bottom: 20px;">Historial de Movimientos</h2>
            
            <div class="filter-section">
                <div class="filter-row">
                    <div class="form-group" style="margin-bottom: 0;">
                        <label>Filtrar por Tipo</label>
                        <select id="filterType" onchange="filterTransactions()">
                            <option value="all">Todos</option>
                            <option value="income">Ingresos</option>
                            <option value="expense">Gastos</option>
                        </select>
                    </div>
                    <div class="form-group" style="margin-bottom: 0;">
                        <label>Fecha Desde</label>
                        <input type="date" id="filterDateFrom" onchange="filterTransactions()">
                    </div>
                    <div class="form-group" style="margin-bottom: 0;">
                        <label>Fecha Hasta</label>
                        <input type="date" id="filterDateTo" onchange="filterTransactions()">
                    </div>
                </div>
            </div>

            <div class="transaction-list" id="transactionList">
                <div class="empty-state">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                    <h3>No hay movimientos registrados</h3>
                    <p>Comienza registrando tus ingresos y gastos</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Categor√≠as predefinidas
        const incomeCategories = [
            'Banca 16',
            'Banca 54',
            'Venta de Seguros',
            'Venta de Recargas',
            'C√≥digos de Barra',
            'Propina Diaria',
            'Otros Ingresos'
        ];

        const expenseCategories = [
            'Pr√©stamo BHD Le√≥n',
            'Pr√©stamo Scotiabank',
            'Alimentaci√≥n',
            'Transporte',
            'Servicios',
            'Entretenimiento',
            'Salud',
            'Otros Gastos'
        ];

        // Estado de la aplicaci√≥n
        let transactions = [];
        let creditUsed = 0;
        const creditLimit = 10000;
        let budgets = {};
        let categoryBudgets = {};

        // Inicializar
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            setTodayDate();
            updateNextPayments();
            updateUI();
            initializeStats();
            setCurrentMonth();
            updateBudgetDisplay();
        });

        // Cambiar tipo de movimiento
        document.getElementById('movementType').addEventListener('change', function() {
            const categoryGroup = document.getElementById('categoryGroup');
            const categorySelect = document.getElementById('category');
            
            if (this.value) {
                categoryGroup.style.display = 'block';
                categorySelect.innerHTML = '<option value="">Seleccionar...</option>';
                
                const categories = this.value === 'income' ? incomeCategories : expenseCategories;
                categories.forEach(cat => {
                    const option = document.createElement('option');
                    option.value = cat;
                    option.textContent = cat;
                    categorySelect.appendChild(option);
                });
            } else {
                categoryGroup.style.display = 'none';
            }
        });

        // Formulario de movimientos
        document.getElementById('movementForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const transaction = {
                id: Date.now(),
                type: document.getElementById('movementType').value,
                category: document.getElementById('category').value,
                amount: parseFloat(document.getElementById('amount').value),
                description: document.getElementById('description').value,
                date: document.getElementById('date').value,
                notes: document.getElementById('notes').value,
                timestamp: new Date().toISOString()
            };

            transactions.push(transaction);
            saveData();
            updateUI();
            this.reset();
            document.getElementById('categoryGroup').style.display = 'none';
            setTodayDate();
            
            alert('‚úÖ Movimiento registrado exitosamente');
        });

        // Formulario de tarjeta de cr√©dito
        document.getElementById('creditForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const operation = document.getElementById('creditOperation').value;
            const amount = parseFloat(document.getElementById('creditAmount').value);
            
            if (operation === 'charge') {
                if (creditUsed + amount > creditLimit) {
                    alert('‚ö†Ô∏è No tienes suficiente l√≠mite disponible en la tarjeta');
                    return;
                }
                creditUsed += amount;
            } else {
                creditUsed = Math.max(0, creditUsed - amount);
            }

            const transaction = {
                id: Date.now(),
                type: operation === 'charge' ? 'expense' : 'income',
                category: 'Tarjeta de Cr√©dito Qik',
                amount: amount,
                description: document.getElementById('creditDescription').value,
                date: document.getElementById('creditDate').value,
                notes: `Operaci√≥n de tarjeta: ${operation === 'charge' ? 'Cargo' : 'Pago'}`,
                timestamp: new Date().toISOString(),
                creditCard: true
            };

            transactions.push(transaction);
            saveData();
            updateUI();
            this.reset();
            
            alert('‚úÖ Operaci√≥n de tarjeta registrada exitosamente');
        });

        // Cambiar de pesta√±a
        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }

        // Establecer fecha de hoy
        function setTodayDate() {
            const today = new Date().toISOString().split('T')[0];
            const dateInputs = document.querySelectorAll('input[type="date"]');
            dateInputs.forEach(input => {
                if (!input.value) {
                    input.value = today;
                }
            });
        }

        // Actualizar pr√≥ximos pagos de pr√©stamos
        function updateNextPayments() {
            const today = new Date();
            const currentMonth = today.getMonth();
            const currentYear = today.getFullYear();
            const currentDay = today.getDate();

            // BHD Le√≥n - d√≠a 10
            let bhdMonth = currentDay <= 10 ? currentMonth : currentMonth + 1;
            let bhdYear = currentYear;
            if (bhdMonth > 11) {
                bhdMonth = 0;
                bhdYear++;
            }
            const bhdNext = new Date(bhdYear, bhdMonth, 10);
            document.getElementById('bhdNextPayment').textContent = formatDate(bhdNext);

            // Scotiabank - d√≠a 24
            let scotiaMonth = currentDay <= 24 ? currentMonth : currentMonth + 1;
            let scotiaYear = currentYear;
            if (scotiaMonth > 11) {
                scotiaMonth = 0;
                scotiaYear++;
            }
            const scotiaNext = new Date(scotiaYear, scotiaMonth, 24);
            document.getElementById('scotiaNextPayment').textContent = formatDate(scotiaNext);
        }

        // Formatear fecha
        function formatDate(date) {
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return date.toLocaleDateString('es-DO', options);
        }

        // Actualizar interfaz
        function updateUI() {
            updateBalances();
            updateCreditCard();
            renderTransactions();
            updateBudgetDisplay();
            initializeStats();
        }

        // Actualizar balances
        function updateBalances() {
            const income = transactions
                .filter(t => t.type === 'income')
                .reduce((sum, t) => sum + t.amount, 0);
            
            const expense = transactions
                .filter(t => t.type === 'expense')
                .reduce((sum, t) => sum + t.amount, 0);
            
            const balance = income - expense;

            document.getElementById('totalIncome').textContent = formatCurrency(income);
            document.getElementById('totalExpense').textContent = formatCurrency(expense);
            document.getElementById('totalBalance').textContent = formatCurrency(balance);
        }

        // Actualizar tarjeta de cr√©dito
        function updateCreditCard() {
            const available = creditLimit - creditUsed;
            const percentage = (creditUsed / creditLimit) * 100;

            document.getElementById('creditAvailable').textContent = formatCurrency(available);
            document.getElementById('creditUsed').textContent = formatCurrency(creditUsed);
            document.getElementById('creditProgress').style.width = percentage + '%';
        }

        // Renderizar transacciones
        function renderTransactions(filtered = null) {
            const list = document.getElementById('transactionList');
            const transactionsToShow = filtered || transactions;
            
            if (transactionsToShow.length === 0) {
                list.innerHTML = `
                    <div class="empty-state">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                        <h3>No hay movimientos registrados</h3>
                        <p>Comienza registrando tus ingresos y gastos</p>
                    </div>
                `;
                return;
            }

            const sorted = [...transactionsToShow].sort((a, b) => 
                new Date(b.date) - new Date(a.date)
            );

            list.innerHTML = sorted.map(t => `
                <div class="transaction-item">
                    <div class="transaction-info">
                        <div class="transaction-type">${t.category}</div>
                        <div class="transaction-description">${t.description}</div>
                        <div class="transaction-date">${formatDate(new Date(t.date))}</div>
                        ${t.notes ? `<div class="transaction-date" style="margin-top: 5px;">üìù ${t.notes}</div>` : ''}
                    </div>
                    <div class="transaction-amount ${t.type}">
                        ${t.type === 'income' ? '+' : '-'} ${formatCurrency(t.amount)}
                    </div>
                    <button class="btn btn-danger" onclick="deleteTransaction(${t.id})">
                        üóëÔ∏è Borrar
                    </button>
                </div>
            `).join('');
        }

        // Filtrar transacciones
        function filterTransactions() {
            const type = document.getElementById('filterType').value;
            const dateFrom = document.getElementById('filterDateFrom').value;
            const dateTo = document.getElementById('filterDateTo').value;

            let filtered = transactions;

            if (type !== 'all') {
                filtered = filtered.filter(t => t.type === type);
            }

            if (dateFrom) {
                filtered = filtered.filter(t => t.date >= dateFrom);
            }

            if (dateTo) {
                filtered = filtered.filter(t => t.date <= dateTo);
            }

            renderTransactions(filtered);
        }

        // Eliminar transacci√≥n
        function deleteTransaction(id) {
            if (confirm('¬øEst√°s seguro de que quieres eliminar este movimiento?')) {
                const transaction = transactions.find(t => t.id === id);
                
                // Si es una operaci√≥n de tarjeta, ajustar el cr√©dito usado
                if (transaction.creditCard) {
                    if (transaction.type === 'expense') {
                        creditUsed -= transaction.amount;
                    } else {
                        creditUsed += transaction.amount;
                    }
                    creditUsed = Math.max(0, Math.min(creditLimit, creditUsed));
                }

                transactions = transactions.filter(t => t.id !== id);
                saveData();
                updateUI();
                alert('‚úÖ Movimiento eliminado exitosamente');
            }
        }

        // Formatear moneda
        function formatCurrency(amount) {
            return 'RD$ ' + amount.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
        }

        // Budget Form Handler
        document.getElementById('budgetForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const amount = parseFloat(document.getElementById('budgetAmount').value);
            const monthYear = document.getElementById('budgetMonth').value;
            
            budgets[monthYear] = amount;
            saveData();
            updateBudgetDisplay();
            
            alert('‚úÖ Presupuesto establecido exitosamente');
            this.reset();
            setCurrentMonth();
        });

        // Category Budget Form Handler
        document.getElementById('categoryBudgetForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const category = document.getElementById('budgetCategory').value;
            const amount = parseFloat(document.getElementById('categoryBudgetAmount').value);
            
            categoryBudgets[category] = amount;
            saveData();
            updateCategoryBudgets();
            
            alert('‚úÖ L√≠mite de categor√≠a establecido');
            this.reset();
        });

        // Set current month
        function setCurrentMonth() {
            const today = new Date();
            const monthYear = today.toISOString().slice(0, 7);
            document.getElementById('budgetMonth').value = monthYear;
            document.getElementById('statsMonth').value = monthYear;
        }

        // Update budget display
        function updateBudgetDisplay() {
            const today = new Date();
            const currentMonth = today.toISOString().slice(0, 7);
            
            const budget = budgets[currentMonth] || 0;
            const spent = transactions
                .filter(t => t.type === 'expense' && t.date.startsWith(currentMonth))
                .reduce((sum, t) => sum + t.amount, 0);
            
            const available = budget - spent;
            const percentage = budget > 0 ? (spent / budget) * 100 : 0;
            
            document.getElementById('monthlyBudget').textContent = formatCurrency(budget);
            document.getElementById('budgetSpent').textContent = formatCurrency(spent);
            document.getElementById('budgetAvailable').textContent = formatCurrency(available);
            
            // Compliance percentage
            const compliance = budget > 0 ? Math.max(0, 100 - percentage) : 100;
            document.getElementById('budgetCompliance').textContent = compliance.toFixed(1) + '%';
            
            // Progress bar
            const progressBar = document.getElementById('budgetProgressBar');
            progressBar.style.width = Math.min(percentage, 100) + '%';
            
            let progressText = percentage.toFixed(1) + '% del presupuesto usado';
            if (percentage > 100) {
                progressText = '¬°Presupuesto excedido! ' + (percentage - 100).toFixed(1) + '% sobre el l√≠mite';
            }
            document.getElementById('budgetProgressText').textContent = progressText;
            
            // Update category budgets
            updateCategoryBudgets();
        }

        // Update category budgets
        function updateCategoryBudgets() {
            const container = document.getElementById('categoryBudgets');
            
            if (Object.keys(categoryBudgets).length === 0) {
                container.innerHTML = `
                    <div class="empty-state" style="padding: 40px 20px;">
                        <p>Configura presupuestos por categor√≠a de gasto</p>
                    </div>
                `;
                return;
            }

            const today = new Date();
            const currentMonth = today.toISOString().slice(0, 7);
            
            container.innerHTML = '';
            
            Object.keys(categoryBudgets).forEach(category => {
                const limit = categoryBudgets[category];
                const spent = transactions
                    .filter(t => t.type === 'expense' && t.category === category && t.date.startsWith(currentMonth))
                    .reduce((sum, t) => sum + t.amount, 0);
                
                const percentage = (spent / limit) * 100;
                let fillClass = '';
                if (percentage >= 90) fillClass = 'danger';
                else if (percentage >= 70) fillClass = 'warning';
                
                const item = document.createElement('div');
                item.className = 'category-budget-item';
                item.innerHTML = `
                    <div class="category-budget-header">
                        <span class="category-budget-name">${category}</span>
                        <span class="category-budget-amount">${formatCurrency(limit)}</span>
                    </div>
                    <div class="category-budget-bar">
                        <div class="category-budget-fill ${fillClass}" style="width: ${Math.min(percentage, 100)}%"></div>
                    </div>
                    <div class="category-budget-info">
                        <span>Gastado: ${formatCurrency(spent)}</span>
                        <span>Disponible: ${formatCurrency(limit - spent)}</span>
                    </div>
                    <div class="category-budget-info" style="margin-top: 5px;">
                        <span>${percentage.toFixed(1)}% usado</span>
                        <button class="btn btn-danger" onclick="deleteCategoryBudget('${category}')" style="padding: 5px 10px; font-size: 12px;">Eliminar</button>
                    </div>
                `;
                container.appendChild(item);
            });
        }

        // Delete category budget
        function deleteCategoryBudget(category) {
            if (confirm(`¬øEliminar el presupuesto para ${category}?`)) {
                delete categoryBudgets[category];
                saveData();
                updateCategoryBudgets();
            }
        }

        // Initialize statistics
        function initializeStats() {
            // Populate years dropdown
            const years = new Set();
            transactions.forEach(t => {
                const year = new Date(t.date).getFullYear();
                years.add(year);
            });
            
            const currentYear = new Date().getFullYear();
            years.add(currentYear);
            
            const yearSelect = document.getElementById('statsYear');
            yearSelect.innerHTML = '<option value="">Seleccionar...</option>';
            
            Array.from(years).sort((a, b) => b - a).forEach(year => {
                const option = document.createElement('option');
                option.value = year;
                option.textContent = year;
                if (year === currentYear) {
                    option.selected = true;
                }
                yearSelect.appendChild(option);
            });
            
            updateMonthlyStats();
            updateAnnualStats();
        }

        // Show stats view
        function showStats(type) {
            document.querySelectorAll('.stats-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            if (type === 'monthly') {
                document.getElementById('monthlyStats').style.display = 'block';
                document.getElementById('annualStats').style.display = 'none';
                updateMonthlyStats();
            } else {
                document.getElementById('monthlyStats').style.display = 'none';
                document.getElementById('annualStats').style.display = 'block';
                updateAnnualStats();
            }
        }

        // Update monthly statistics
        function updateMonthlyStats() {
            const monthYear = document.getElementById('statsMonth').value;
            if (!monthYear) return;
            
            const monthTransactions = transactions.filter(t => t.date.startsWith(monthYear));
            
            const income = monthTransactions
                .filter(t => t.type === 'income')
                .reduce((sum, t) => sum + t.amount, 0);
            
            const expense = monthTransactions
                .filter(t => t.type === 'expense')
                .reduce((sum, t) => sum + t.amount, 0);
            
            const balance = income - expense;
            
            document.getElementById('monthIncomeTotal').textContent = formatCurrency(income);
            document.getElementById('monthExpenseTotal').textContent = formatCurrency(expense);
            document.getElementById('monthBalanceTotal').textContent = formatCurrency(balance);
            
            // Income by category
            const incomeByCategory = {};
            monthTransactions
                .filter(t => t.type === 'income')
                .forEach(t => {
                    incomeByCategory[t.category] = (incomeByCategory[t.category] || 0) + t.amount;
                });
            
            renderCategoryStats('monthIncomeByCategory', incomeByCategory, income, 'income');
            
            // Expense by category
            const expenseByCategory = {};
            monthTransactions
                .filter(t => t.type === 'expense')
                .forEach(t => {
                    expenseByCategory[t.category] = (expenseByCategory[t.category] || 0) + t.amount;
                });
            
            renderCategoryStats('monthExpenseByCategory', expenseByCategory, expense, 'expense');
        }

        // Update annual statistics
        function updateAnnualStats() {
            const year = document.getElementById('statsYear').value;
            if (!year) return;
            
            const yearTransactions = transactions.filter(t => t.date.startsWith(year));
            
            const income = yearTransactions
                .filter(t => t.type === 'income')
                .reduce((sum, t) => sum + t.amount, 0);
            
            const expense = yearTransactions
                .filter(t => t.type === 'expense')
                .reduce((sum, t) => sum + t.amount, 0);
            
            const balance = income - expense;
            
            document.getElementById('yearIncomeTotal').textContent = formatCurrency(income);
            document.getElementById('yearExpenseTotal').textContent = formatCurrency(expense);
            document.getElementById('yearBalanceTotal').textContent = formatCurrency(balance);
            
            // Monthly breakdown
            const monthlyData = {};
            const monthNames = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 
                              'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];
            
            for (let i = 0; i < 12; i++) {
                const month = String(i + 1).padStart(2, '0');
                const monthKey = `${year}-${month}`;
                const monthTrans = transactions.filter(t => t.date.startsWith(monthKey));
                
                const monthIncome = monthTrans
                    .filter(t => t.type === 'income')
                    .reduce((sum, t) => sum + t.amount, 0);
                
                const monthExpense = monthTrans
                    .filter(t => t.type === 'expense')
                    .reduce((sum, t) => sum + t.amount, 0);
                
                if (monthIncome > 0 || monthExpense > 0) {
                    monthlyData[monthNames[i]] = {
                        income: monthIncome,
                        expense: monthExpense,
                        balance: monthIncome - monthExpense
                    };
                }
            }
            
            renderMonthlyBreakdown(monthlyData);
            
            // Calculate averages
            const monthsWithData = Object.keys(monthlyData).length || 1;
            document.getElementById('avgMonthlyIncome').textContent = formatCurrency(income / monthsWithData);
            document.getElementById('avgMonthlyExpense').textContent = formatCurrency(expense / monthsWithData);
        }

        // Render category statistics
        function renderCategoryStats(containerId, data, total, type) {
            const container = document.getElementById(containerId);
            
            if (Object.keys(data).length === 0) {
                container.innerHTML = `
                    <div class="empty-state" style="padding: 40px 20px;">
                        <p>No hay datos para mostrar</p>
                    </div>
                `;
                return;
            }
            
            // Sort by amount
            const sorted = Object.entries(data).sort((a, b) => b[1] - a[1]);
            
            container.innerHTML = sorted.map(([category, amount]) => {
                const percentage = total > 0 ? (amount / total) * 100 : 0;
                return `
                    <div class="category-stat-item">
                        <div style="flex: 1;">
                            <div class="category-stat-name">${category}</div>
                            <div class="category-stat-bar">
                                <div class="category-stat-fill" style="width: ${percentage}%; background: ${type === 'income' ? '#10b981' : '#ef4444'}"></div>
                            </div>
                            <div class="category-stat-percentage">${percentage.toFixed(1)}% del total</div>
                        </div>
                        <div class="category-stat-amount ${type}">${formatCurrency(amount)}</div>
                    </div>
                `;
            }).join('');
        }

        // Render monthly breakdown
        function renderMonthlyBreakdown(data) {
            const container = document.getElementById('yearMonthlyBreakdown');
            
            if (Object.keys(data).length === 0) {
                container.innerHTML = `
                    <div class="empty-state" style="padding: 40px 20px;">
                        <p>No hay datos para mostrar</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = Object.entries(data).map(([month, values]) => {
                const balanceClass = values.balance >= 0 ? 'positive' : 'negative';
                return `
                    <div class="month-item">
                        <div class="month-header">
                            <span class="month-name">${month}</span>
                            <span class="month-balance ${balanceClass}">${formatCurrency(values.balance)}</span>
                        </div>
                        <div class="month-details">
                            <div>Ingresos: <strong style="color: #10b981;">${formatCurrency(values.income)}</strong></div>
                            <div>Gastos: <strong style="color: #ef4444;">${formatCurrency(values.expense)}</strong></div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Guardar datos
        function saveData() {
            localStorage.setItem('transactions', JSON.stringify(transactions));
            localStorage.setItem('creditUsed', creditUsed.toString());
            localStorage.setItem('budgets', JSON.stringify(budgets));
            localStorage.setItem('categoryBudgets', JSON.stringify(categoryBudgets));
        }

        // Cargar datos
        function loadData() {
            const savedTransactions = localStorage.getItem('transactions');
            const savedCreditUsed = localStorage.getItem('creditUsed');
            const savedBudgets = localStorage.getItem('budgets');
            const savedCategoryBudgets = localStorage.getItem('categoryBudgets');

            if (savedTransactions) {
                transactions = JSON.parse(savedTransactions);
            }

            if (savedCreditUsed) {
                creditUsed = parseFloat(savedCreditUsed);
            }

            if (savedBudgets) {
                budgets = JSON.parse(savedBudgets);
            }

            if (savedCategoryBudgets) {
                categoryBudgets = JSON.parse(savedCategoryBudgets);
            }
        }
    </script>
</body>
</html>
